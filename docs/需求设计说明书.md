# 团队在线知识库软件需求规格说明书 (SRS) - v2.1 Final

## 1. 引言 (Introduction)

### 1.1 目的
本文档旨在为"团队在线知识库"项目的开发提供明确、详细、无歧义的需求基准，作为后续设计、开发、测试和验收的唯一依据。

### 1.2 项目范围
本项目旨在创建一个以 Markdown 为核心、支持网页访问的团队知识管理平台。它将取代传统的文件共享和散乱的文档管理方式，提供一个可集成、可扩展、具备完整生命周期管理的中央知识库平台。

**核心功能**:
- **企业级身份集成**: 支持 LDAP/AD 及单点登录。
- **高级内容创作**: 功能丰富的 Web Markdown 编辑器，支持草稿、编辑锁、内容嵌入。
- **知识组织与治理**: 版本控制、权限管理、模板、回收站、内容审查与归档。
- **发现与传播**: 全文检索、个性化仪表盘、收藏、分享与多渠道通知。
- **平台化与扩展性**: 提供 RESTful API，支持品牌化定制。
- **数据管理**: 支持数据导入、导出与迁移。
- **运营与合规**: 提供分析报告、审计日志，并支持 GDPR。

**不包含功能**:
- 实时多人协同编辑（例如 Google Docs 模式）。
- 复杂的审批工作流。
- 与特定外部应用（如IM工具）的深度、开箱即用的集成。

### 1.3 目标读者
- 项目发起人、产品经理
- UI/UX 设计师、系统架构师
- 开发与测试工程师
- 系统运维与安全合规人员
- 最终用户

### 1.4 定义、首字母缩写和缩略语
- **AD/LDAP**: Active Directory / Lightweight Directory Access Protocol，企业级目录服务。
- **API**: Application Programming Interface，应用程序编程接口。
- **GDPR**: General Data Protection Regulation，通用数据保护条例。
- **RBAC**: Role-Based Access Control，基于角色的访问控制。
- **SRS**: Software Requirements Specification，软件需求规格说明书。
- **WCAG**: Web Content Accessibility Guidelines，Web内容无障碍指南。

### 1.5 参考资料
*(本章节用于列出编写此文档时参考的其他文档)*

## 2. 总体描述 (Overall Description)

### 2.1 产品背景
当前团队知识文档高度依赖于零散的文件，通过即时通讯工具或邮件分发，导致知识孤岛、版本混乱、检索困难和权限失控。本系统旨在通过提供一个中心化的、基于 Markdown 的在线平台来解决这些痛点。

### 2.2 用户特征 (User Characteristics)
系统用户根据其在系统中的职责和权限，分为以下几类。用户的最终权限由其拥有的最高角色决定（例如，系统管理员拥有所有权限）。详细的功能权限分配见 `2.4 权限矩阵`。

#### 基础身份
1.  **已注册用户 (Registered User)**: 系统的基本成员，拥有个人账户。其在特定空间内的具体权限由其被赋予的“空间内角色”决定。

#### 全局角色
1.  **系统管理员 (System Admin)**: 拥有系统的最高管理权限，负责整个知识库实例的健康、安全和配置。

#### 空间内角色
1.  **空间管理员 (Space Admin)**: 负责其所管理的知识空间的日常运作和内容质量。
2.  **编辑者 (Editor)**: 主要的内容贡献者。
3.  **评论者 (Commenter)**: 内容的审阅者和反馈提供者。
4.  **访客 (Viewer)**: 纯粹的内容消费者。

### 2.3 假设与依赖
1. 系统部署在团队内部服务器或指定的云环境中。
2. 用户通过主流现代桌面浏览器（Chrome/Firefox/Edge/Safari 的最新版本）访问。
3. 具备稳定的网络连接。

### 2.4 权限矩阵 (Permission Matrix)
下表详细定义了每个角色对应的功能权限。✅ 表示拥有权限，❌ 表示没有权限。

| 功能分类 | 权限描述 | 系统管理员 | 空间管理员 | 编辑者 | 评论者 | 访客 |
| :--- | :--- | :---: | :---: | :---: | :---: | :---: |
| **系统管理** | **System Administration** | ✅ | ❌ | ❌ | ❌ | ❌ |
| | 访问系统管理后台 | ✅ | ❌ | ❌ | ❌ | ❌ |
| | 管理所有用户账户（增删改查） | ✅ | ❌ | ❌ | ❌ | ❌ |
| | 创建/删除/归档知识空间 | ✅ | ❌ | ❌ | ❌ | ❌ |
| | 指派/撤销空间管理员 | ✅ | ❌ | ❌ | ❌ | ❌ |
| | 配置系统级设置（SMTP, OAuth, LDAP） | ✅ | ❌ | ❌ | ❌ | ❌ |
| | 查看系统级审计日志 | ✅ | ❌ | ❌ | ❌ | ❌ |
| | 查看系统级分析报告 | ✅ | ❌ | ❌ | ❌ | ❌ |
| | 配置系统品牌化（Logo, 主题） | ✅ | ❌ | ❌ | ❌ | ❌ |
| | 全局启用/禁用公开分享功能 | ✅ | ❌ | ❌ | ❌ | ❌ |
| **空间管理** | **Space Administration** | ✅ | ✅ | ❌ | ❌ | ❌ |
| | 配置空间设置（名称, 图标） | ✅ | ✅ | ❌ | ❌ | ❌ |
| | 管理空间成员及角色 | ✅ | ✅ | ❌ | ❌ | ❌ |
| | 管理空间用户组 | ✅ | ✅ | ❌ | ❌ | ❌ |
| | 管理空间文档模板 | ✅ | ✅ | ❌ | ❌ | ❌ |
| | 管理空间回收站（恢复/永久删除） | ✅ | ✅ | ❌ | ❌ | ❌ |
| **文档与目录** | **Document & Directory Actions** | | | | | |
| | 创建文档与目录 | ✅ | ✅ | ✅ | ❌ | ❌ |
| | 阅读文档 | ✅ | ✅ | ✅ | ✅ | ✅ |
| | 编辑**任何**文档与目录 | ✅ | ✅ | ❌ | ❌ | ❌ |
| | 编辑**自己创建或被授权**的文档 | ✅ | ✅ | ✅ | ❌ | ❌ |
| | 删除**任何**文档与目录 | ✅ | ✅ | ❌ | ❌ | ❌ |
| | 删除**自己创建或被授权**的文档 | ✅ | ✅ | ✅ | ❌ | ❌ |
| | 移动文档与目录 | ✅ | ✅ | ✅ | ❌ | ❌ |
| | 查看版本历史 | ✅ | ✅ | ✅ | ✅ | ✅ |
| | 恢复历史版本 | ✅ | ✅ | ✅ | ❌ | ❌ |
| | 设置内容审查策略 | ✅ | ✅ | ✅ | ❌ | ❌ |
| | 归档文档与目录 | ✅ | ✅ | ❌ | ❌ | ❌ |
| **内容交互** | **Content Interaction** | | | | | |
| | 添加/移除标签 | ✅ | ✅ | ✅ | ❌ | ❌ |
| | 发表评论 | ✅ | ✅ | ✅ | ✅ | ❌ |
| | 编辑**自己**的评论 | ✅ | ✅ | ✅ | ✅ | ❌ |
| | 删除**自己**的评论 | ✅ | ✅ | ✅ | ✅ | ❌ |
| | 删除**空间内任何**评论 | ✅ | ✅ | ❌ | ❌ | ❌ |
| | 点赞文档 | ✅ | ✅ | ✅ | ✅ | ✅ |
| | 收藏/星标文档 | ✅ | ✅ | ✅ | ✅ | ✅ |
| **分享与导出** | **Sharing & Exporting** | | | | | |
| | 系统内分享 | ✅ | ✅ | ✅ | ✅ | ✅ |
| | 通过邮件分享 | ✅ | ✅ | ✅ | ✅ | ✅ |
| | 创建公开分享链接（若已启用） | ✅ | ✅ | ✅ | ❌ | ❌ |
| | 导出为 MD/PDF/ZIP | ✅ | ✅ | ✅ | ✅ | ✅ |

## 3. 功能需求 (Functional Requirements)

### 3.1 用户认证与管理
- **用户故事**: 作为用户，我希望能安全便捷地登录系统；作为管理员，我希望能高效管理用户账户。
- **具体需求**:
  - **FUNC-3.1.1**: 系统应提供基于邮箱和密码的注册功能。
    - a. 注册页面应包含字段：邮箱、密码、确认密码。
    - b. 系统需校验邮箱格式的有效性，并确保其在系统中是唯一的。
    - c. 系统需校验密码符合复杂度要求（例如：至少8位，包含字母和数字）。
    - d. 注册成功后，系统应（可选）发送一封验证邮件至用户邮箱，用户点击链接后方可激活账户。
  - **FUNC-3.1.2**: 系统应提供基于邮箱和密码的登录和登出功能。
    - a. 登录失败时，系统应给出明确的错误提示（如“邮箱或密码错误”），但不应明确指出是邮箱不存在还是密码错误。
    - b. 登录成功后，用户应被重定向至个人仪表盘页面。
    - c. 用户点击“登出”按钮后，其会话应立即失效，并被重定向至登录页面。
  - **FUNC-3.1.3**: 系统存储的用户密码必须经过加盐哈希处理。
  - **FUNC-3.1.4**: 系统应提供一个通过邮箱验证的安全密码重置流程。
    - a. 用户在“忘记密码”页面输入注册邮箱。
    - b. 系统向该邮箱发送一封包含有时效性（如1小时）的唯一重置链接的邮件。
    - c. 用户点击链接后，跳转至新密码设置页面，输入并确认新密码后完成重置。
  - **FUNC-3.1.5**: 用户应能够修改自己的个人资料和偏好。
    - a. 在个人设置页面，用户可以修改其显示名称。
    - b. 用户可以上传和更换个人头像。
    - c. 用户可以修改自己的密码，此操作需要输入旧密码进行验证。
    - d. 用户应能在个人设置中选择界面主题（如“浅色模式”/“深色模式”）。
  - **FUNC-3.1.6**: (可选) 系统应支持通过 OAuth 2.0 协议进行单点登录。

### 3.2 知识管理与编辑器
- **用户故事**: 作为内容创作者，我希望能在一个功能强大、体验流畅的编辑器中撰写内容，并嵌入丰富的多媒体元素。
- **具体需求**:
  - **FUNC-3.2.1**: 系统应提供一个分栏式所见即所得 (WYSIWYG) 的 Markdown 编辑器，左侧为输入区，右侧为实时预览区。
  - **FUNC-3.2.2**: 编辑器应提供工具栏按钮以进行常用格式化操作，按钮应有清晰的图标和鼠标悬停提示（Tooltip）。
  - **FUNC-3.2.3**: 编辑器应支持通过粘贴或拖拽方式上传并插入图片。
    - a. 上传过程中应有进度提示。
    - b. 上传成功后，图片应自动插入到光标所在位置，格式为 Markdown 图片链接。
    - c. 系统应对上传图片的大小和格式（如: <5MB, PNG/JPG/GIF）进行限制。
  - **FUNC-3.2.4**: 编辑器应提供一个便捷的图形化界面来创建和编辑表格，用户可通过该界面增删行列。
  - **FUNC-3.2.5**: 编辑器应能正确渲染 Markdown 任务列表语法 (`- [ ]` 和 `- [x]`) 为可交互的复选框。
  - **FUNC-3.2.6**: 编辑器应集成 Mermaid.js，在 `mermaid` 代码块中编写的文本应被渲染为对应的图表。
  - **FUNC-3.2.7**: 编辑器应支持使用 LaTeX 语法（如 `$$...$$`）编写和渲染数学公式。
  - **FUNC-3.2.8**: 编辑器应支持 `[TOC]` 语法，在文档预览和最终页面中，该位置应被渲染为基于标题（H1-H6）生成的文档目录。
  - **FUNC-3.2.9**: 用户应能在知识空间 (Space) 的侧边栏导航树中创建无限层级的目录（文件夹）。
  - **FUNC-3.2.10**: 用户应能通过在导航树中拖拽操作来移动文档和目录，实现重新排序或改变层级。
  - **FUNC-3.2.11**: 用户应能通过右键点击导航树中的文档和目录，在上下文菜单中选择“重命名”或“删除”。删除操作应有二次确认提示。
  - **FUNC-3.2.12**: 系统应在每次用户手动点击“保存”按钮或使用快捷键（Ctrl+S）时，自动创建一个新的版本。系统不应为自动保存的草稿创建版本。
  - **FUNC-3.2.13**: 系统应提供版本历史记录视图，以列表形式展示所有历史版本（包含版本号、作者、时间戳）。用户可选择任意两个版本进行差异（Diff）对比，差异应以高亮形式（红/绿背景）清晰展示增删内容。
  - **FUNC-3.2.14**: 在版本历史视图中，用户应能选择任一历史版本，并点击“恢复此版本”按钮，将文档内容恢复到所选版本状态。
  - **FUNC-3.2.15**: 用户应能在文档编辑页面的设置区域为一个文档添加一个或多个标签。系统应支持标签的输入提示和自动补全。
  - **FUNC-3.2.16**: 在文档阅读页面，所有标签应以可点击的链接形式展示。用户点击后，应跳转到包含所有使用了该标签的文档的搜索结果页。
  - **FUNC-3.2.17**: 系统应提供草稿自动保存机制。
  - **FUNC-3.2.18**: 系统应提供编辑冲突防止机制。
  - **FUNC-3.2.19**: 编辑器应支持通过粘贴链接的方式，自动嵌入来自主流第三方服务的富内容预览，至少应包括：
    - a. 视频 (YouTube, Vimeo)。
    - b. 设计稿 (Figma, Miro)。
    - c. 代码片段 (GitHub Gist)。

### 3.3 权限管理
- **用户故事**: 作为空间管理员，我希望能将成员分组管理，并对文档和目录进行精确的权限控制。
- **具体需求**:
  - **FUNC-3.3.1**: 空间管理员应能在空间设置中创建、重命名和删除用户组。并能将空间内的成员添加或移出用户组。
  - **FUNC-3.3.2**: 权限设置界面应允许在知识空间、目录和单个文档三个层级上进行配置。
  - **FUNC-3.3.3**: 子级目录和文档应默认继承其父级目录的权限设置。用户可以手动断开继承，为特定子项设置独立权限。
  - **FUNC-3.3.4**: 系统应至少提供“可编辑”、“可评论”和“可查看”三种权限级别，以供分配。
  - **FUNC-3.3.5**: 在权限设置界面，用户可以通过搜索来添加用户或用户组，并为其分配合适的权限级别。

### 3.4 搜索与发现
- **用户故事**: 作为用户，我希望能通过任意关键词快速、准确地找到知识库中的任何一篇相关文档。
- **具体需求**:
  - **FUNC-3.4.1**: 系统应在页面顶部导航栏提供一个全局搜索框。输入关键词时，应有下拉列表实时展示最相关的5-10个结果。
  - **FUNC-3.4.2**: 在独立的搜索结果页面，应提供高级搜索选项。筛选条件至少包括：作者（下拉选择）、标签（多选）、所在空间（下拉选择）、所在目录（树状选择）、更新日期范围（日期选择器）。
  - **FUNC-3.4.3**: 在搜索结果列表中，每条结果应包含文档标题、摘要、所属空间和最后更新时间。摘要中应高亮显示匹配的关键词。

### 3.5 仪表盘与浏览
- **用户故事**: 作为用户，我希望一登录就能看到与我相关的内容动态，方便我快速开始工作。
- **具体需求**:
  - **FUNC-3.5.1**: 个人仪表盘应包含以下可交互的列表模块：
    - a. “最近由我编辑”：显示最近编辑的10篇文档的链接。
    - b. “最近查看”：显示最近查看的10篇文档的链接。
    - c. “收藏夹”：显示所有被用户星标收藏的文档链接。
  - **FUNC-3.5.2**: 仪表盘的团队动态模块应以时间线形式，展示用户所在空间内最近20条文档的创建和更新活动。
  - **FUNC-3.5.3**: 侧边栏导航树应支持展开和折叠。当前正在查看的文档应在树中高亮显示。

### 3.6 文档交互与通知
- **用户故事**: 作为协作者，我希望能方便地收藏、分享内容，并及时收到与我相关的所有动态通知。
- **具体需求**:
  - **FUNC-3.6.1**: 每篇文档的阅读页面应提供一个“点赞”按钮，用户点击后按钮变为激活状态，总点赞数增加。再次点击则取消点赞。
  - **FUNC-3.6.2**: 文档底部的评论区应包含：
    - a. 一个支持基础 Markdown 的评论输入框。
    - b. 评论列表，支持嵌套回复（螺纹式对话），并清晰展示层级关系。
    - c. 每条评论旁应有“回复”、“编辑”、“删除”（仅限作者或管理员）和“点赞”按钮。
  - **FUNC-3.6.3**: 在评论或文档正文中，当用户输入 `@` 字符时，系统应自动弹出一个可搜索的下拉列表，展示当前空间内的所有用户，供用户选择提及。
  - **FUNC-3.6.4**: 当用户被`@`提及、其创建的文档被评论或点赞、或有内容审查任务时，系统应向其发送通知。
  - **FUNC-3.6.5**: 系统应提供一个统一的站内通知中心，聚合所有通知，并管理已读/未读状态。
  - **FUNC-3.6.6**: 系统应支持将通知通过邮件发送给用户。
  - **FUNC-3.6.7**: 用户应能在个人设置中，自主选择需要通过邮件接收的通知类型（如：只接收@我的邮件通知）。
  - **FUNC-3.6.8**: 系统应提供文档收藏功能。
    - a. 在每篇文档的阅读页面，应提供一个清晰的“收藏”或“星标”图标按钮。
    - b. 用户点击该按钮后，此文档应被添加到用户的个人收藏夹中，同时按钮应变为激活状态。
    - c. 再次点击该按钮，则取消收藏。

### 3.7 数据迁移
- **用户故事**: 作为新用户，我希望能方便地将团队现有的 Markdown 文档批量导入到新系统中。
- **具体需求**:
  - **FUNC-3.7.1**: 系统应支持导入单个 `.md` 文件来创建一篇新文档。
  - **FUNC-3.7.2**: 系统应支持导入一个包含 `.md` 文件和图片资源的 ZIP 压缩包。
    - a. 系统应能解析 ZIP 包内的目录结构，并在指定的知识空间内创建对应的目录和文档。
    - b. 系统应能正确处理文档中对图片资源的相对路径引用，并将图片上传至附件库。
  - **FUNC-3.7.3**: (可选) 系统应提供一个迁移向导或脚本，以支持从主流知识库（如 Confluence）进行数据迁移。

### 3.8 文档模板
- **用户故事**: 作为团队成员，我希望能使用预设的模板来创建周报、会议纪要等格式固定的文档。
- **具体需求**:
  - **FUNC-3.8.1**: 在空间设置中，空间管理员应能进入一个模板管理界面，在该界面中可以创建、编辑和删除文档模板。编辑模板的界面应与普通文档编辑器相同。
  - **FUNC-3.8.2**: 用户点击“新建文档”按钮时，系统应提供“新建空白文档”和“从模板新建”两个选项。选择后者将展示可用模板列表，用户选择其一即可将模板内容预填充到新文档编辑器中。

### 3.9 数据导出
- **用户故事**: 作为用户，我希望能将知识库中的内容导出到本地，以便离线阅读或备份。
- **具体需求**:
  - **FUNC-3.9.1**: 在文档阅读页面，用户应能通过菜单选项将当前文档导出为 `.md` 文件。
  - **FUNC-3.9.2**: 在文档阅读页面，用户应能将当前文档导出为 `.pdf` 文件。导出的 PDF 应包含文档标题、内容和图片，并可选择性地添加页眉（标题）和页脚（页码、导出日期）。
  - **FUNC-3.9.3**: 在导航树中右键点击目录或空间时，用户应能选择将整个目录或空间打包导出为 ZIP 文件。该 ZIP 文件需保持原有的目录结构，并包含所有 `.md` 文件和相关的图片资源。

### 3.10 回收站
- **用户故事**: 作为用户，当我误删了重要文档时，我希望能从回收站里轻松地找回它。
- **具体需求**:
  - **FUNC-3.10.1**: 所有被删除的文档和目录都应被移入所属空间的回收站，而不是永久删除。
  - **FUNC-3.10.2**: 空间管理员应能访问回收站，查看被删除内容的列表（包含删除者、删除时间）。
  - **FUNC-3.10.3**: 空间管理员应能从回收站中选择一项或多项内容进行“恢复”操作，恢复后内容将回到其原始位置。
  - **FUNC-3.10.4**: 空间管理员应能从回收站中选择一项或多项内容进行“永久删除”操作，此操作需二次确认。
  - **FUNC-3.10.5**: 系统可配置回收站内容的自动清理策略（如：保留30天后自动永久删除）。

### 3.11 内容生命周期管理
- **用户故事**: 作为知识管理员，我希望能确保知识库中的内容保持最新，并能将过时的项目归档。
- **具体需求**:
  - **FUNC-3.11.1**: 用户在编辑文档时，可以为文档设置一个“审查周期”（如：3个月、6个月、1年）和指定一位或多位“内容负责人”。
  - **FUNC-3.11.2**: 当文档距离下一个审查日期不足一周时，系统应向内容负责人发送通知和邮件，提醒其进行内容审查。
  - **FUNC-3.11.3**: 空间管理员应能将不再活跃的整个知识空间或单个文档/目录设置为“已归档”状态。
  - **FUNC-3.11.4**: 已归档的内容将变为只读状态，并从主导航树和默认搜索结果中隐藏。
  - **FUNC-3.11.5**: 用户在高级搜索中应可选择“搜索已归档内容”来查找历史资料。

### 3.12 系统管理后台
- **用户故事**: 作为系统管理员，我需要一个强大的后台来全面监控、管理、配置和定制整个知识库系统。
- **具体需求**:
  - **FUNC-3.12.1**: 管理后台的仪表盘应以图表和数据的形式，展示系统核心指标（如用户总数、空间数、文档数、日活跃用户等）。
  - **FUNC-3.12.2**: 用户管理界面应提供一个可搜索、可分页的用户列表。系统管理员应能在此界面执行：邀请新用户、禁用/启用用户、删除用户、提升/降级其他用户的系统管理员权限。
  - **FUNC-3.12.3**: 空间管理界面应提供所有知识空间的列表。系统管理员应能在此界面执行：归档空间、删除空间、查看空间成员、指派或更换空间管理员。
  - **FUNC-3.12.4**: 系统设置界面应允许管理员配置：
    - a. 邮件服务器（SMTP）信息，用于发送注册验证和通知邮件。
    - b. 第三方 OAuth 应用的 Client ID 和 Secret。
    - c. 自动备份的频率和存储位置。
  - **FUNC-3.12.5**: 审计日志界面应提供一个可按用户、操作类型、IP地址和日期范围进行筛选和检索的日志记录列表。
  - **FUNC-3.12.6**: 后台应提供一个“分析仪表盘”，用于洞察知识库的使用情况，至少包含：
    - a. **内容分析**: 最常访问的文档、长时间未更新的文档、最常搜索的关键词（含无结果的搜索词）。
    - b. **用户贡献分析**: 贡献度最高的用户/团队（按创建/编辑文档数排名）。
    - c. **系统活动分析**: 用户活跃度趋势图（DAU/MAU）。
  - **FUNC-3.12.7**: 管理员应能将分析报告中的数据导出为 CSV 格式。
  - **FUNC-3.12.8**: 系统管理员应能在后台进行品牌化定制，至少包括：
    - a. 上传企业 Logo，替换系统默认 Logo。
    - b. 自定义界面的主色调。

### 3.13 企业身份集成
- **用户故事**: 作为企业IT管理员，我希望能将知识库与公司现有的 Active Directory / LDAP 集成，实现统一身份认证。
- **具体需求**:
  - **FUNC-3.13.1**: 系统应支持通过 LDAP/AD 协议进行用户认证。
  - **FUNC-3.13.2**: 系统应支持从 LDAP/AD 定期同步用户和用户组信息，实现用户账户的自动开通、禁用和组织架构同步。

### 3.14 对外 API
- **用户故事**: 作为开发者，我希望能通过 API 将知识库与其他内部系统集成，实现内容的自动化读写。
- **具体需求**:
  - **FUNC-3.14.1**: 系统应提供一套有版本控制的 RESTful API。
  - **FUNC-3.14.2**: API 至少应覆盖对文档的 CRUD (创建/读取/更新/删除) 和搜索操作。
  - **FUNC-3.14.3**: API 访问必须通过 token (如 OAuth2 Bearer Token) 进行认证和授权。
  - **FUNC-3.14.4**: 系统应提供详细的、遵循 OpenAPI (Swagger) 规范的 API 文档。

### 3.15 分享与传播
- **用户故事**: 作为用户，我希望能方便地将有价值的知识分享给同事，或在特定情况下分享给外部人员。
- **具体需求**:
  - **FUNC-3.15.1**: 系统应支持在内部向其他用户或用户组分享文档。分享后，目标用户将收到站内通知。
  - **FUNC-3.15.2**: 系统应支持通过邮件分享文档链接。邮件中需明确提示此为内部链接，需要登录才能访问。
  - **FUNC-3.15.3**: (可选) 系统应支持创建公开的只读分享链接。
    - a. 此功能需由系统管理员在后台全局开启。
    - b. 用户可以为生成的链接设置一个有效期和一个可选的访问密码。

## 4. 非功能需求 (Non-Functional Requirements)

### 4.1 性能需求 (Performance)
- **PERF-4.1.1**: 核心页面（仪表盘、文档视图）在网络状况良好时，首次加载时间应在3秒以内。
- **PERF-4.1.2**: Markdown 编辑器的输入和预览刷新延迟应低于300毫秒。
- **PERF-4.1.3**: 系统应能稳定支持至少100个用户的并发在线访问。
- **PERF-4.1.4**: 对于10万篇文档规模的知识库，95%的搜索请求应在2秒内返回结果。

### 4.2 安全性需求 (Security)
- **SECU-4.2.1**: 系统所有的数据传输必须强制使用 HTTPS。
- **SECU-4.2.2**: 系统必须对所有用户输入和渲染的 Markdown 内容进行严格的净化（Sanitization），以防范跨站脚本（XSS）攻击。
- **SECU-4.2.3**: 系统所有状态变更的请求必须使用 CSRF Token 保护，以防范跨站请求伪造攻击。
- **SECU-4.2.4**: 系统后端必须对所有数据请求进行严格的权限校验，防止越权访问。
- **SECU-4.2.5**: 登录接口必须有速率限制和多次失败后临时锁定的机制，以防范暴力破解。
- **SECU-4.2.6**: 系统必须对用户上传的所有附件进行病毒扫描和文件类型白名单校验。
- **SECU-4.2.7**: 系统必须记录关键操作的审计日志（如用户登录、权限变更、内容删除），以供安全追溯。

### 4.3 可用性需求 (Usability)
- **USAB-4.3.1**: 界面设计应遵循 Material Design 或 Ant Design 设计语言的主要原则，以确保一致性和直观性。
- **USAB-4.3.2**: 系统布局应在不出现水平滚动条的情况下，清晰地适配从 1280px 到 4K 的主流桌面屏幕宽度。
- **USAB-4.3.3**: 编辑器应支持常用的键盘快捷键（如保存 `Ctrl+S`）。

### 4.4 可靠性需求 (Reliability)
- **RELI-4.4.1**: 系统核心功能的年可用性应达到 99.5%。
- **RELI-4.4.2**: 系统应提供每日数据库和文档存储的自动备份机制，并支持从备份中恢复。

### 4.5 可扩展性需求 (Extensibility)
- **EXTN-4.5.1**: 系统架构应采用模块化设计，便于未来新增功能或与第三方系统集成。
- **EXTN-4.5.2**: 核心服务应支持水平扩展，以应对用户量和数据量的增长。

### 4.6 可维护性需求 (Maintainability)
- **MAIN-4.6.1**: 核心业务逻辑的单元测试覆盖率应不低于70%。
- **MAIN-4.6.2**: 项目应提供详细的部署和运维文档。
- **MAIN-4.6.3**: 系统应提供结构化的日志输出（如 JSON 格式），方便接入监控和告警系统进行故障排查。

### 4.7 可访问性需求 (Accessibility)
- **ACCS-4.7.1**: 系统所有面向用户的前端界面应符合 Web 内容无障碍指南 (WCAG) 2.1 的 AA 级别标准。
- **ACCS-4.7.2**: 系统所有功能应能完全通过键盘进行操作，无需依赖鼠标。
- **ACCS-4.7.3**: 系统的界面元素（如输入框、按钮）应有正确的标签（label），图片应有替代文本（alt text），以确保屏幕阅读器可以正常解析和播报。

### 4.8 合规性需求 (Compliance)
- **COMP-4.8.1**: 系统应支持 GDPR (通用数据保护条例)，允许用户在个人设置中导出其所有个人数据，并提供一个流程以支持“被遗忘权”（即永久删除账户及其所有相关内容）。

### 4.9 运维需求 (Operations)
- **OPS-4.9.1**: 系统的所有配置项（如数据库连接、邮件服务器、LDAP配置）必须通过外部配置文件或环境变量进行管理，严禁硬编码在代码中。
- **OPS-4.9.2**: 系统应提供一个无需认证的 HTTP 健康检查端点（如 `/healthz`），用于监控系统核心服务的可用性。

---
*文档结束*
